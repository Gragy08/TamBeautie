extends ../layouts/default.pug

block main
  .row
    .col-12
      .card
        .card-header
          .row.align-items-center
            .col
                h4.card-title
                | #{pageTitle} của 
                span(style="color: #e83e8c") #{contactDetail.fullName}
            // end col
            .col-auto
              a.btn.btn-secondary(
                href=`/${pathAdmin}/contact/view/${contactDetail._id}`
                )
                <i class="fa-solid fa-arrow-left me-1"></i>
                | Quay lại trang chi tiết khách hàng
          // end row
        // end card-header
        .card-body.pt-0
            //- Table
            .table-responsive
                table.table.table-striped.mb-0
                    thead.table-light
                        tr
                            th STT
                            th Tên dịch vụ
                            th Đơn vị
                            th Ngày sử dụng dịch vụ
                            th Giá dịch vụ
                            th Khuyến mãi
                            th Khách đã cọc
                            th Khách thanh toán
                            th Tổng đơn khám
                            th Trạng thái
                            th.text-end Hành động
                    tbody
                        if(bookingList.length > 0)
                            each item, index in bookingList
                                tr
                                td #{index + 1}
                                td
                                  if item.services && item.services.length > 0
                                    ul.mb-0.list-unstyled
                                      each sv in item.services
                                        li #{sv.name}
                                td
                                  if item.services && item.services.length > 0
                                    ul.mb-0.list-unstyled
                                      each sv in item.services
                                        li #{sv.unit}
                                td #{item.formatedDate}
                                td
                                  if item.services && item.services.length > 0
                                    ul.mb-0.list-unstyled
                                      each sv in item.services
                                        li #{sv.price}
                                td  #{item.promotion}
                                td  #{item.deposit}
                                td #{item.pay}
                                td #{item.total}
                                td
                                    if (item.status == "success")
                                        span.badge.bg-success Hoàn thành
                                    if (item.status == "unsuccess")
                                        span.badge.bg-secondary Chưa Hoàn thành
                                    else if (item.status == "guarantee")
                                        span.badge.bg-warning Bảo hành
                                    else if (item.status == "cancel")
                                        span.badge.bg-danger Hủy
                                td.text-end
                                  a(
                                    href="javascript:;"
                                    button-api
                                    data-method="PATCH"
                                    data-api=`/${pathAdmin}/booking/undo/${item._id}`
                                    class="me-1"
                                    style="font-size: 20px"
                                  )
                                    i.las.la-undo.text-info.font-16.me-1
                                  a(
                                    href="javascript:;"
                                    button-api
                                    data-method="DELETE"
                                    data-api=`/${pathAdmin}/booking/destroy/${item._id}`
                                    style="font-size: 20px"
                                  )
                                    i.las.la-trash-alt.text-danger.font-16
                        else
                            tr
                                td(colspan="6" class="text-center") Không tìm thấy dữ liệu